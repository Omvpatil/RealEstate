# FastAPI Backend - Visual Architecture Guide

## ğŸ—ï¸ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     NEXT.JS FRONTEND (PORT 3000)                 â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Builder   â”‚  â”‚  Customer   â”‚  â”‚    Login     â”‚            â”‚
â”‚  â”‚   Portal    â”‚  â”‚   Portal    â”‚  â”‚   Register   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ HTTP/HTTPS â†“
                        (JWT Token in Headers)
                              â†“          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FASTAPI BACKEND (PORT 8000)                    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      main.py                              â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚           Authentication Middleware              â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  - JWT Token Validation                         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  - Role-Based Access Control                    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  - CORS Configuration                           â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                         â†“                                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚              API Routes (30+)                    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  /api/auth/*        - Authentication            â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  /api/projects/*    - Project Management        â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  /api/units/*       - Unit Management           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  /api/bookings/*    - Booking System            â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  /api/appointments/*- Appointment Scheduling    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  /api/notifications/*- Notification System      â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  /api/messages/*    - Messaging                 â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      crud.py                              â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚         Database Operations (80+)                â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ User CRUD          â€¢ Project CRUD             â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Builder CRUD       â€¢ Unit CRUD                â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Customer CRUD      â€¢ Booking CRUD             â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Payment CRUD       â€¢ Appointment CRUD         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Message CRUD       â€¢ Notification CRUD        â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Progress CRUD      â€¢ 3D Model CRUD            â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    schemas.py                             â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚        Pydantic Validation (60+ Schemas)         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  Input Validation  â†’  Type Conversion  â†’  Output â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  UserCreate    ProjectCreate    BookingCreate    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  UserUpdate    ProjectUpdate    BookingUpdate    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  UserResponse  ProjectResponse  BookingResponse  â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     models.py                             â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚         SQLAlchemy ORM Models (15 Tables)        â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  1. users             9. project_progress        â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  2. builders         10. construction_updates    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  3. customers        11. messages                â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  4. projects         12. change_requests         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  5. units            13. models_3d               â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  6. bookings         14. notifications           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  7. payments         15. system_settings         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  8. appointments                                 â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   database.py                             â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚          Database Connection Manager             â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ SQLAlchemy Engine                            â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Session Factory                              â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Connection Pooling                           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Dependency Injection (get_db)                â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               POSTGRESQL DATABASE (PORT 5432)                    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  15 Database Tables                      â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Authentication    Property       Financial             â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ users         â”œâ”€â”€ projects   â”œâ”€â”€ payments          â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ builders      â”œâ”€â”€ units      â””â”€â”€ bookings          â”‚    â”‚
â”‚  â”‚  â””â”€â”€ customers     â””â”€â”€ appointments                     â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Communication     Progress       Media                 â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ messages      â”œâ”€â”€ progress   â”œâ”€â”€ models_3d         â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ notifications â”œâ”€â”€ updates    â””â”€â”€ system_settings   â”‚    â”‚
â”‚  â”‚  â””â”€â”€ change_requests                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Diagram

### 1. User Registration Flow

```
Frontend                  Backend                   Database
   â”‚                         â”‚                          â”‚
   â”‚  POST /api/auth/register                           â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                          â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Validate with Pydantic  â”‚
   â”‚                         â”‚  (schemas.UserCreate)    â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Hash password (bcrypt)  â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Create user             â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Create profile          â”‚
   â”‚                         â”‚  (builder/customer)      â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Return user + token     â”‚
   â”‚                         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                         â”‚                          â”‚
   â”‚  JWT Token + User Data  â”‚                          â”‚
   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                          â”‚
   â”‚                         â”‚                          â”‚
   â”‚  Store token in         â”‚                          â”‚
   â”‚  localStorage           â”‚                          â”‚
   â”‚                         â”‚                          â”‚
```

### 2. Create Project Flow (Builder)

```
Frontend                  Backend                   Database
   â”‚                         â”‚                          â”‚
   â”‚  POST /api/projects     â”‚                          â”‚
   â”‚  Authorization: Bearer  â”‚                          â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                          â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Verify JWT token        â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Check user is builder   â”‚
   â”‚                         â”‚  (require_builder)       â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Validate project data   â”‚
   â”‚                         â”‚  (schemas.ProjectCreate) â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Create project          â”‚
   â”‚                         â”‚  (crud.create_project)   â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Increment builder's     â”‚
   â”‚                         â”‚  total_projects          â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Return project          â”‚
   â”‚                         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                         â”‚                          â”‚
   â”‚  Project data           â”‚                          â”‚
   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                          â”‚
   â”‚                         â”‚                          â”‚
```

### 3. Create Booking Flow (Customer)

```
Frontend                  Backend                   Database
   â”‚                         â”‚                          â”‚
   â”‚  POST /api/bookings     â”‚                          â”‚
   â”‚  Authorization: Bearer  â”‚                          â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                          â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Verify JWT token        â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Check user is customer  â”‚
   â”‚                         â”‚  (require_customer)      â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Validate booking data   â”‚
   â”‚                         â”‚  (schemas.BookingCreate) â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Check unit availability â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Create booking          â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Update unit status      â”‚
   â”‚                         â”‚  to 'booked'             â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Decrement project's     â”‚
   â”‚                         â”‚  available_units         â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Create notification     â”‚
   â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                         â”‚                          â”‚
   â”‚                         â”‚  Return booking          â”‚
   â”‚                         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                         â”‚                          â”‚
   â”‚  Booking confirmation   â”‚                          â”‚
   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                          â”‚
   â”‚                         â”‚                          â”‚
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                           â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Layer 1: CORS Protection                          â”‚     â”‚
â”‚  â”‚  - Allowed origins configured                      â”‚     â”‚
â”‚  â”‚  - Credentials support enabled                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Layer 2: JWT Authentication                       â”‚     â”‚
â”‚  â”‚  - Token verification on protected routes          â”‚     â”‚
â”‚  â”‚  - HS256 algorithm                                 â”‚     â”‚
â”‚  â”‚  - Configurable expiration                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Layer 3: Role-Based Access Control                â”‚     â”‚
â”‚  â”‚  - require_builder() dependency                    â”‚     â”‚
â”‚  â”‚  - require_customer() dependency                   â”‚     â”‚
â”‚  â”‚  - Resource ownership validation                   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Layer 4: Input Validation                         â”‚     â”‚
â”‚  â”‚  - Pydantic schema validation                      â”‚     â”‚
â”‚  â”‚  - Type checking                                   â”‚     â”‚
â”‚  â”‚  - SQL injection prevention (ORM)                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Layer 5: Password Security                        â”‚     â”‚
â”‚  â”‚  - Bcrypt hashing                                  â”‚     â”‚
â”‚  â”‚  - Salt rounds configured                          â”‚     â”‚
â”‚  â”‚  - Never store plain text                          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Database Entity Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚          â”‚
â”‚ id (PK) â”‚          â”‚
â”‚ email   â”‚          â”‚
â”‚ type    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
     â”‚               â”‚
     â”‚ 1:1           â”‚ 1:1
     â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Builder  â”‚    â”‚ Customer â”‚
â”‚          â”‚    â”‚          â”‚
â”‚ id (PK)  â”‚    â”‚ id (PK)  â”‚
â”‚ user_id  â”‚    â”‚ user_id  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚
     â”‚ 1:n           â”‚ 1:n
     â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Project  â”‚    â”‚ Booking  â”‚
â”‚          â”‚    â”‚          â”‚
â”‚ id (PK)  â”‚    â”‚ id (PK)  â”‚
â”‚builder_idâ”‚    â”‚customer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚
     â”‚ 1:n           â”‚ n:1
     â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   Unit   â”‚
â”‚          â”‚
â”‚ id (PK)  â”‚
â”‚project_idâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1:n
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Related Data â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Payments   â”‚
â”‚ â€¢ Messages   â”‚
â”‚ â€¢ Changes    â”‚
â”‚ â€¢ Models 3D  â”‚
â”‚ â€¢ Progress   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Request/Response Flow

### Example: Get Projects with Filters

```
1. CLIENT REQUEST
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ GET /api/projects?                          â”‚
   â”‚     page=1&                                 â”‚
   â”‚     limit=10&                               â”‚
   â”‚     city=Bangalore&                         â”‚
   â”‚     status=construction                     â”‚
   â”‚                                             â”‚
   â”‚ Headers:                                    â”‚
   â”‚   Authorization: Bearer eyJ...              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
2. AUTHENTICATION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Verify JWT token                          â”‚
   â”‚ â€¢ Extract user_id from token                â”‚
   â”‚ â€¢ Load user from database                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
3. VALIDATION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Parse query parameters                    â”‚
   â”‚ â€¢ Validate with ProjectFilter schema        â”‚
   â”‚ â€¢ Convert types (int, enum, etc.)           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
4. DATABASE QUERY
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ crud.get_projects(db, filters):             â”‚
   â”‚                                             â”‚
   â”‚ SELECT * FROM projects                      â”‚
   â”‚ JOIN builders ON ...                        â”‚
   â”‚ WHERE city ILIKE '%Bangalore%'              â”‚
   â”‚   AND status = 'construction'               â”‚
   â”‚ ORDER BY created_at DESC                    â”‚
   â”‚ LIMIT 10 OFFSET 0                           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
5. RESPONSE FORMATTING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Convert SQLAlchemy models to Pydantic     â”‚
   â”‚ â€¢ Format with ProjectResponse schema        â”‚
   â”‚ â€¢ Add pagination metadata                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
6. CLIENT RESPONSE
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ {                                           â”‚
   â”‚   "success": true,                          â”‚
   â”‚   "data": {                                 â”‚
   â”‚     "projects": [...],                      â”‚
   â”‚     "pagination": {                         â”‚
   â”‚       "currentPage": 1,                     â”‚
   â”‚       "totalPages": 5,                      â”‚
   â”‚       "totalItems": 45                      â”‚
   â”‚     }                                       â”‚
   â”‚   }                                         â”‚
   â”‚ }                                           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Development Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Development Cycle                     â”‚
â”‚                                                          â”‚
â”‚  1. Define Model                                        â”‚
â”‚     â”œâ”€â”€ Create in models.py                            â”‚
â”‚     â”œâ”€â”€ Add relationships                              â”‚
â”‚     â””â”€â”€ Add indexes                                    â”‚
â”‚                                                          â”‚
â”‚  2. Create Schemas                                      â”‚
â”‚     â”œâ”€â”€ ModelBase (shared fields)                      â”‚
â”‚     â”œâ”€â”€ ModelCreate (POST validation)                  â”‚
â”‚     â”œâ”€â”€ ModelUpdate (PATCH validation)                 â”‚
â”‚     â””â”€â”€ ModelResponse (GET serialization)              â”‚
â”‚                                                          â”‚
â”‚  3. Implement CRUD                                      â”‚
â”‚     â”œâ”€â”€ create_model(db, data)                         â”‚
â”‚     â”œâ”€â”€ get_model_by_id(db, id)                        â”‚
â”‚     â”œâ”€â”€ get_models(db, filters)                        â”‚
â”‚     â”œâ”€â”€ update_model(db, id, data)                     â”‚
â”‚     â””â”€â”€ delete_model(db, id)                           â”‚
â”‚                                                          â”‚
â”‚  4. Create API Routes                                   â”‚
â”‚     â”œâ”€â”€ POST   /api/models                             â”‚
â”‚     â”œâ”€â”€ GET    /api/models                             â”‚
â”‚     â”œâ”€â”€ GET    /api/models/{id}                        â”‚
â”‚     â”œâ”€â”€ PATCH  /api/models/{id}                        â”‚
â”‚     â””â”€â”€ DELETE /api/models/{id}                        â”‚
â”‚                                                          â”‚
â”‚  5. Add Authentication                                  â”‚
â”‚     â”œâ”€â”€ Public routes (no auth)                        â”‚
â”‚     â”œâ”€â”€ Protected routes (require auth)                â”‚
â”‚     â””â”€â”€ Role-specific routes (builder/customer)        â”‚
â”‚                                                          â”‚
â”‚  6. Test                                               â”‚
â”‚     â”œâ”€â”€ Unit tests (pytest)                            â”‚
â”‚     â”œâ”€â”€ Integration tests                              â”‚
â”‚     â””â”€â”€ Manual testing (Swagger UI)                    â”‚
â”‚                                                          â”‚
â”‚  7. Document                                            â”‚
â”‚     â”œâ”€â”€ Add docstrings                                 â”‚
â”‚     â”œâ”€â”€ Update README                                  â”‚
â”‚     â””â”€â”€ Auto-generated docs (FastAPI)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Production Setup                     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚             Load Balancer (Nginx)            â”‚     â”‚
â”‚  â”‚                                               â”‚     â”‚
â”‚  â”‚  â€¢ SSL/TLS termination                       â”‚     â”‚
â”‚  â”‚  â€¢ Request routing                           â”‚     â”‚
â”‚  â”‚  â€¢ Static file serving                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â”‚                              â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚        â†“                â†“                â†“            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ FastAPI  â”‚    â”‚ FastAPI  â”‚    â”‚ FastAPI  â”‚        â”‚
â”‚  â”‚ Worker 1 â”‚    â”‚ Worker 2 â”‚    â”‚ Worker 3 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚                â”‚                â”‚            â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                         â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚          PostgreSQL Database                 â”‚     â”‚
â”‚  â”‚                                               â”‚     â”‚
â”‚  â”‚  â€¢ Master-Slave replication                  â”‚     â”‚
â”‚  â”‚  â€¢ Automatic backups                         â”‚     â”‚
â”‚  â”‚  â€¢ Connection pooling                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚              Redis Cache                      â”‚     â”‚
â”‚  â”‚                                               â”‚     â”‚
â”‚  â”‚  â€¢ Session storage                           â”‚     â”‚
â”‚  â”‚  â€¢ API response caching                      â”‚     â”‚
â”‚  â”‚  â€¢ Rate limiting                             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Monitoring & Logging

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Observability Stack                    â”‚
â”‚                                                         â”‚
â”‚  Application Logs                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â€¢ Request/Response logging                   â”‚     â”‚
â”‚  â”‚ â€¢ Error tracking                             â”‚     â”‚
â”‚  â”‚ â€¢ Performance metrics                        â”‚     â”‚
â”‚  â”‚ â€¢ Database query logs                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         Log Aggregation (ELK Stack)          â”‚     â”‚
â”‚  â”‚                                               â”‚     â”‚
â”‚  â”‚  Elasticsearch â†’ Logstash â†’ Kibana           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                         â”‚
â”‚  Metrics & Alerts                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â€¢ API response times                         â”‚     â”‚
â”‚  â”‚ â€¢ Database query performance                 â”‚     â”‚
â”‚  â”‚ â€¢ Error rates                                â”‚     â”‚
â”‚  â”‚ â€¢ Resource utilization                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                         â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚      Monitoring (Prometheus + Grafana)       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Code Organization Best Practices

```
fastapi/
â”‚
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ __init__.py          # Package initialization
â”‚   â”œâ”€â”€ database.py          # âœ… Database connection (single responsibility)
â”‚   â”œâ”€â”€ models.py            # âœ… ORM models (data layer)
â”‚   â”œâ”€â”€ schemas.py           # âœ… Pydantic schemas (validation layer)
â”‚   â”œâ”€â”€ crud.py              # âœ… Database operations (business logic)
â”‚   â””â”€â”€ main.py              # âœ… API routes (presentation layer)
â”‚
â”œâ”€â”€ tests/                   # Test suite
â”‚   â”œâ”€â”€ test_auth.py
â”‚   â”œâ”€â”€ test_projects.py
â”‚   â””â”€â”€ test_bookings.py
â”‚
â”œâ”€â”€ alembic/                 # Database migrations
â”‚   â””â”€â”€ versions/
â”‚
â”œâ”€â”€ docs/                    # Documentation
â”‚   â”œâ”€â”€ BACKEND_DOCUMENTATION.md
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md
â”‚   â””â”€â”€ ARCHITECTURE.md
â”‚
â”œâ”€â”€ .env                     # Environment variables (gitignored)
â”œâ”€â”€ .env.example             # Example environment file
â”œâ”€â”€ requirements.txt         # Dependencies
â”œâ”€â”€ init_database.py         # DB initialization
â”œâ”€â”€ README.md                # Main documentation
â””â”€â”€ docker-compose.yml       # Docker setup
```

---

## ğŸ“š Complete File Summary

| File               | Purpose       | Lines     | Key Features                    |
| ------------------ | ------------- | --------- | ------------------------------- |
| `database.py`      | DB Connection | ~30       | Session management, pooling     |
| `models.py`        | ORM Models    | ~650      | 15 tables, relationships, enums |
| `schemas.py`       | Validation    | ~550      | 60+ schemas, type safety        |
| `crud.py`          | DB Operations | ~700      | 80+ functions, optimizations    |
| `main.py`          | API Routes    | ~350      | 30+ endpoints, auth, RBAC       |
| `init_database.py` | DB Setup      | ~180      | Table creation, sample data     |
| **Total Core**     | **Backend**   | **~2460** | **Complete implementation**     |

---

**ğŸ‰ You now have a complete, production-ready FastAPI backend with comprehensive documentation and visual guides!**
